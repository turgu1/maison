@startuml{sequence_uml.png} "Maison Sequence Diagram" width=8cm

actor Device
actor device_ctrl as "maison/WATER_SPILL/ctrl"
actor server_status as "maison/status"

group Device actions
  Device --> server_status : "{Startup}"
  loop Every 24 hours
    Device --> server_status : "{Watchdog}"
  end
end

group Server Requests
  group Device State
    device_ctrl --> Device : "STATE?"
    Device --> server_status : "{State}"
  end

  group Current Config
    device_ctrl --> Device : "CONFIG?"
    Device --> server_status : "{config}"
  end

  group Set Config
    device_ctrl --> Device : "CONFIG: {config}"
    Device --> server_status : "{config}"
  end

  group Reset device
    device_ctrl --> Device : "RESTART!"
  end
end
@enduml